"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var nativeEncode=encodeURIComponent,natvieDecode=decodeURIComponent,Q_MARK="?",A_MARK="&",E_MARK="=";function safeParse(e){try{return JSON.parse(e)}catch(e){return}}const _curryN=e=>r=>{const t=(...n)=>n.length<e?(...e)=>t(...n,...e):r(...n);return t},_curry2=_curryN(2),merge=(...e)=>Object.assign({},...e),type=e=>Object.prototype.toString.call(e).replace(/^\[object\s(.*)\]$/,"$1"),keys=Object.keys,equals=_curry2((e,r)=>{if(r===e)return!0;const t=type(r),n=type(e);if("Array"===t&&"Array"===n){let t=r.length;if(t!==e.length)return!1;for(let n=0;n<t;n++)if(!equals(e[n],r[n]))return!1;return!0}if("Object"===t&&"Object"===n){let t=keys(r);if(t.length!==keys(e).length)return!1;for(let n of t)if(!equals(e[n],r[n]))return!1;return!0}return r!=r&&e!=e}),_nativeSelfFn=e=>(...r)=>t=>t[e](...r),pipe=(...e)=>e.reduce((e,r)=>(...t)=>r(e(...t))),isEmpty=e=>[void 0,null,"",[],{}].some(equals(e)),split=_nativeSelfFn("split"),apply=_curry2((e,r)=>e(...r));var mergeArray=apply(merge),handleElementForURL=pipe(split(E_MARK),(function(e){var r;return(r={})[natvieDecode(e[0])]=safeParse(natvieDecode(e[1])),r}));function mixer(e,r){var t=[];return t.push(e),[void 0,null,"",[],{}].some(equals(r))||(t.push(Q_MARK),t.push(encode(r))),t.join("")}function parser(e){return decode(e.split(Q_MARK)[1]||"")}function encode(e){return Object.keys(e).map((function(r){return[nativeEncode(r),E_MARK,nativeEncode(JSON.stringify(e[r]))].join("")})).join(A_MARK)}function decode(e){if(!e)return{};var r=e.split(A_MARK).map(handleElementForURL);return mergeArray(r)}exports.mixer=mixer,exports.parser=parser;
